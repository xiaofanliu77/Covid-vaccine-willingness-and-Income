<!DOCTYPE html>
<script src='https://d3js.org/d3.v5.min.js'></script>
<head>
  <title>Covid Vaccination and Income: Phase 1B</title>
</head>
<style> circle {fill: lightgreen; stroke: white;} </style>
<h2 style="font-family:helvetica">Does Income Influence Covid-19 Vaccination Willingness?</h2>
<h3 style="font-size:15px;font-family:arial">This narrative visualization explores
  possible relationship between Covid-19 vaccination willingness and their median household income.
  Vaccination willingness is measured by percentage of people getting at least one dose of
  any type of vaccine in all 58 California counties, in Phase 1A, 1B, 1C and 2(current, as of 7/20/2021) of vaccine distribution.
</h3>
<button onclick="document.location='index.html'">Previous Phase</button>
<button onclick="document.location='ph1c.html'">Next Phase</button>
<p><br></p>
<body onload='init()'>
<svg width=700 height=500>
</svg>
<script>
async function init() {
  var x = d3.scaleLinear().domain([20000, 120000]).range([0, 600]);
  var y = d3.scaleLinear().domain([0, 100]).range([400, 0]);
  var width=700;
  var height=500;
  var margin=50;

  data = await d3.csv("https://xiaofanliu77.github.io/covac/summary.csv");
  svg = d3.select("svg");
  g = svg.append("g").attr("transform", "translate("+50+","+50+")");
  g.selectAll("circle").data(data).enter().append("circle")
    .attr("cx", function(d){return x(d.Income);})
    .attr("cy", function(d){return y(d.Ph1B_percent*100);})
    .attr("r", 4);

  d3.select("svg").append("g")
  .attr("transform","translate("+50+","+50+")")
  .call(d3.axisLeft(y));

  d3.select("svg").append("g")
  .attr("transform","translate("+50+","+450+")")
  .call(d3.axisBottom(x));

  g.append("text")
    .attr("x", (width/2))
    .attr("y", 0-(margin.top/5))
    .attr("text-anchor", "middle")
    .attr("font-weight", 500)
    .style("font-size", "16px")
    .style("font-family", "arial")
    .text("Phase 1B (1/19/2021 - 3/14/2021)");

  g.append("text")
    .attr("x", (width/2))
    .attr("y", 20)
    .attr("text-anchor", "middle")
    .style("font-size", "16px")
    .style("font-family", "arial")
    .text("Eligibility: Persons aged 65 years+, essential workers");

  g.append("text")
    .attr("class", "x label")
    .attr("x", width-margin-20)
    .attr("y", height-margin-20)
    .attr("text-anchor", "end")
    .style("font-size", "10px")
    .style("font-family", "arial")
    .text("Median Household Income 2018 (US dollors)");

  g.append("text")
    .attr("class", "y label")
    .attr("x", 0)
    .attr("y", 0-margin*0.6)
    .attr("text-anchor", "end")
    .attr("transform", "rotate(-90)")
    .style("font-size", "10px")
    .style("font-family", "arial")
    .text("Percentage of Population");
}
</script>
</body>
</html>
